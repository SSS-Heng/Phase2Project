"use strict";define(["jquery","jquery_cookie"],function(l){function p(){for(var t=l("header ul.cart_list").find("span.count"),a=l("header ul.cart_list").find("span.price"),e=0,n=0,o=0;o<t.length;o++)e+=Number(t.eq(o).attr("data-count")),n+=Number(t.eq(o).attr("data-count"))*Number(a.eq(o).attr("data-price"));l("p.total_count strong").html(e),l("p.total_money span").html(n)}return{check:function(){console.log("small_cart.js开始执行")},s_c:function(){var r=l.cookie("goods");if(!r)return l(".cart_empty").show(),l(".cart_list_wrapper").hide(),void l("span.cart_num").hide();l(".cart_empty").hide(),l(".cart_list_wrapper").show(),l("span.cart_num").show(),l.ajax({url:"../json/hot_goods.json",success:function(t){for(var a=t.data.list,e=JSON.parse(r),n=[],o=0;o<a.length;o++)for(var s=0;s<e.length;s++)if(e[s].id==a[o].id){n.push({id:a[o].id,num:e[s].num,name:a[o].name,title:a[o].shop_info.title,sub_title:a[o].shop_info.sub_title,price:a[o].price,image:a[o].shop_info.ali_image,note:a[o].shop_info.spec_json[0].item_value});break}for(var i="",c=0;c<n.length;c++)i+='\n          <li class="cart_item" data-id="'+n[c].id+'">\n            <img src="'+n[c].image+'" class="cart_picture">\n            <div class="cart_detail">\n              <p class="title">'+n[c].name+'</p>\n              <p class="attrs">\n                <span class="attr">'+n[c].note+'</span>\n              </p>\n              <p class="cart_price">\n                <span class="price" data-price="'+n[c].price+'">'+n[c].price+'</span>\n                <span class="count" data-count="'+n[c].num+'">'+n[c].num+'</span>\n              </p>\n            </div>\n            <div class="delete_button" data-id="'+n[c].id+'"></div>\n          </li>\n          ';l("ul.cart_list").html(i),p(),console.log("加载购物车页面完成")},error:function(t){console.log(t)}})},s_n_p:p,d_g:function(){console.log("购物车删除函数赋予"),l("ul.cart_list").on("click",".delete_button",function(){console.log("准备删除数据");var t=Number(l(this).attr("data-id"));l(this).closest("li").remove();var a=JSON.parse(l.cookie("goods"));console.log(l.cookie("goods"));for(var e=0;e<a.length;e++)if(a[e].id==t){a.splice(e,1);break}a.length?(l.cookie("goods",JSON.stringify(a),{expires:7,path:"/"}),p()):(l.cookie("goods",null,{path:"/"}),l(".cart_empty").show(),l(".cart_list_wrapper").hide(),l("span.cart_num").hide(),console.log("成功删除数据"))})},end:function(){console.log("small_cart.js执行结束")}}});