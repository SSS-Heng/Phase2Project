"use strict";define(["jquery","jquery_cookie"],function(l){function p(){for(var t=l("header ul.cart_list").find("span.count"),a=l("header ul.cart_list").find("span.price"),e=0,n=0,i=0;i<t.length;i++)e+=Number(t[i].attr("data-count")),n+=Number(t[i].attr("data-count"))*Number(a[i].attr("data-price"));l("p.total_count strong").html(e),l("p.total_money span").html(n)}return{check:function(){console.log("small_cart.js开始执行")},s_c:function(){var c=l.cookie("goods");if(!c)return l(".cart_empty").show(),void l(".cart_list_wrapper").hide();l(".cart_empty").hide(),l(".cart_list_wrapper").show(),l.ajax({url:"../json/hot_goods.json",success:function(t){for(var a=t.data.list,e=JSON.parse(c),n=[],i=0;i<a.length;i++)for(var s=0;s<e.length;s++)if(e[s].id==a[i].id){n.push({id:a[i].id,num:e[s].num,name:a[i].name,title:a[i].shop_info.title,sub_title:a[i].shop_info.sub_title,price:a[i].price,image:a[i].shop_info.ali_image,note:a[i].shop_info.spec_json[0].item_value});break}for(var o="",r=0;r<n.length;r++)o+='\n          <li class="cart_item" data-id="'+n[r].id+'">\n            <img src="'+n[r].image+'" class="cart_picture">\n            <div class="cart_detail">\n              <p class="title">'+n[r].name+'</p>\n              <p class="attrs">\n                <span class="attr">'+n[r].note+'</span>\n              </p>\n              <p class="cart_price">\n                <span class="price" data-price="'+n[r].price+'">'+n[r].price+'</span>\n                <span class="count" data-count="'+n[r].num+'">'+n[r].num+'</span>\n              </p>\n            </div>\n            <div class="delete_button" data-id="'+n[r].id+'"></div>\n          </li>\n          ';l("ul.cart_list").html(o),p(),console.log("加载购物车页面完成")},error:function(t){console.log(t)}})},s_n_p:p,d_g:function(){l("ul.cart_list .delete_button").live("click",function(){var t=l(this).attr("data-id");l(this).closest("li").remove();for(var a=JSON.parse(l.cookie("goods")),e=0;e<a.length;e++)if(a[e].id==t){a.splice(e,1);break}a.length?(l.cookie("goods",JSON.stringify(a),{expires:7,path:"/"}),p()):(l.cookie("goods",null),l(".cart_empty").show(),l(".cart_list_wrapper").hide()),console.log("成功删除数据")})},end:function(){console.log("small_cart.js执行结束")}}});