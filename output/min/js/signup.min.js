"use strict";define(["jquery","input_verification"],function(i,l){function o(e){e[0]&&e[1]&&(e[2]||e[3])?i(".btn.btn_primary").removeClass("disabled"):i(".btn.btn_primary").addClass("disabled")}function u(e){return e<=9?"0"+e:""+e}return{check:function(){console.log("signup.js开始执行")},s_i_v:function(){var t=[!1,!1,!1,!1];i("input.username").blur(function(){var e,r=i("input.username").val(),a=i("input.username").nextAll("span"),n=i("input.username").parents("div.input");0==a.length&&console.log("用户名提示信息节点获取错误"),1!=n.length&&console.log("用户名输入框的父节点获取错误");for(var s=0;s<a.length;s++)a[s].removeClass("input_error");i(".u_format_ok").removeClass("input_ok"),n.removeClass("invalid"),"false"==(e=l.verify("username",r))?t[0]=!1:"u_format_error"==e?(t[0]=!1,i("."+e).addClass("input_error"),n.addClass("invalid")):"u_format_ok"==e?(t[0]=!0,i("."+e).addClass("input_ok")):(t[0]=!1,console.log('$("input.username").blur() is error,result : '+e)),o(t)}),i("input.email").blur(function(){var e,r=i("input.email").val(),a=i("input.email").nextAll("span"),n=i("input.email").parents("div.input");0==a.length&&console.log("邮箱提示信息节点获取错误"),1!=n.length&&console.log("邮箱输入框的父节点获取错误");for(var s=0;s<a.length;s++)a[s].removeClass("input_error");i(".e_format_ok").removeClass("input_ok"),n.removeClass("invalid"),"false"==(e=l.verify("email",r))?t[2]=!1:"e_format_error"==e?(t[2]=!1,i("."+e).addClass("input_error"),n.addClass("invalid")):"e_format_ok"==e?(t[2]=!0,i("."+e).addClass("input_ok")):(t[2]=!1,console.log('$("input.email").blur() is error,result : '+e)),o(t)}),i("input.tel").blur(function(){var e,r=i("input.tel").val(),a=i("input.tel").nextAll("span"),n=i("input.tel").parents("div.input");0==a.length&&console.log("手机号提示信息节点获取错误"),1!=n.length&&console.log("手机号输入框的父节点获取错误");for(var s=0;s<a.length;s++)a[s].removeClass("input_error");i(".t_format_ok").removeClass("input_ok"),n.removeClass("invalid"),"false"==(e=l.verify("tel",r))?t[3]=!1:"t_format_error"==e?(t[3]=!1,i("."+e).addClass("input_error"),n.addClass("invalid")):"t_format_ok"==e?(t[3]=!0,i("."+e).addClass("input_ok")):(t[3]=!1,console.log('$("input.tel").blur() is error,result : '+e)),o(t)}),i("input.password").blur(function(){var e,r=i("input.password").val(),a=i("input.password").nextAll("span"),n=i("input.password").parents("div.input");0==a.length&&console.log("密码提示信息节点获取错误"),1!=n.length&&console.log("密码输入框的父节点获取错误");for(var s=0;s<a.length;s++)a[s].removeClass("input_error").removeClass("input_ok");n.removeClass("invalid"),"false"==(e=l.verify("password",r))?t[1]=!1:"p_format_error"==e?(t[1]=!1,i("."+e).addClass("input_error"),n.addClass("invalid")):"p_strength_low"==e||"p_strength_middle"==e||"p_strength_high"==e?(t[1]=!0,i("."+e).addClass("input_ok")):(t[1]=!1,console.log('$("input.password").blur() is error,result : '+e)),o(t)})},s_v:function(){i(".submit").click(function(e){e.preventDefault();var r,a,n=i("input.username").val(),s=i("input.email").val(),t=i("input.tel").val(),l=i("input.password").val();n||(i(".btn.btn_primary").addClass("disabled"),i(".u_required").addClass("input_error").parents("div.input").addClass("invalid")),s||t||(i(".btn.btn_primary").addClass("disabled"),i(".t_required").addClass("input_error").parents("div.input").addClass("invalid"),i(".e_required").addClass("input_error").parents("div.input").addClass("invalid")),l||(i(".btn.btn_primary").addClass("disabled"),i(".p_required").addClass("input_error").parents("div.input").addClass("invalid")),l&&n&&(s||t)?(a=(r=new Date).getFullYear()+"-"+u(r.getMonth()+1)+"-"+u(r.getDate())+" "+u(r.getHours())+":"+u(r.getMinutes())+":"+u(r.getSeconds()),i.ajax({type:"POST",url:"127.0.0.1/smartisan/signup.php",data:{username:n,email:s,tel:t,password:l,createTime:a},success:function(e){var r=i.parseJSON(e);console.log(r.msg),5==r.code?i(".u_already_exist").addClass("input_error"):6==r.code?i(".e_already_exist").addClass("input_error"):7==r.code?i(".t_already_exist").addClass("input_error"):8==r.code?alert("网络异常，注册失败！请稍后重试。"):alert("注册成功！")},error:function(e){console.log(e)}})):console.log("存在空的input，无法联网注册")})},end:function(){console.log("signup.js执行结束")}}});